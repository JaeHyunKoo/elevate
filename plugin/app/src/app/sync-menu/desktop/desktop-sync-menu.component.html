<div *ngIf="(syncState !== null)">
	<button mat-stroked-button color="primary" [matMenuTriggerFor]="syncMenu">
		<mat-icon *ngIf="(syncState === SyncState.NOT_SYNCED)">
			sync_disabled
		</mat-icon>
		<mat-icon *ngIf="(syncState === SyncState.PARTIALLY_SYNCED)">
			sync_problem
		</mat-icon>
		<mat-icon *ngIf="(syncState === SyncState.SYNCED)">
			sync
		</mat-icon>
		<span *ngIf="(syncState === SyncState.NOT_SYNCED)">
			Activities not synced
		</span>
		<span *ngIf="(syncState === SyncState.PARTIALLY_SYNCED)">
			Activities partially synced
		</span>
		<span *ngIf="(syncState === SyncState.SYNCED && lastSyncDateMessage)">
			{{lastSyncDateMessage}}
		</span>
	</button>
	<mat-menu #syncMenu="matMenu">
		<!--Force full re-sync even of not first synced (to clean up any old history still stored)-->
		<button mat-menu-item (click)="onSync(true, false)"
				*ngIf="(syncState === SyncState.SYNCED)">
			<mat-icon>update</mat-icon>
			<span>Sync recent activities</span>
		</button>
		<button mat-menu-item
				(click)="onSync(false, syncState === SyncState.NOT_SYNCED)">
			<mat-icon>sync</mat-icon>
			<span *ngIf="(syncState === SyncState.NOT_SYNCED)">Sync</span>
			<span *ngIf="(syncState === SyncState.SYNCED)">Sync all activities</span>
			<span *ngIf="(syncState === SyncState.PARTIALLY_SYNCED)">Continue sync</span>
		</button>
		<button mat-menu-item (click)="onSync(false, true)"
				*ngIf="(syncState !== SyncState.NOT_SYNCED)">
			<mat-icon>redo</mat-icon>
			<span>Clear and re-sync activities</span>
		</button>
		<button mat-menu-item (click)="onClearSyncedData()"
				*ngIf="(syncState !== SyncState.NOT_SYNCED)">
			<mat-icon>clear</mat-icon>
			<span>Clear synced activities</span>
		</button>
		<button mat-menu-item (click)="onSyncedBackupExport()"
				*ngIf="(syncState === SyncState.SYNCED)">
			<mat-icon>file_download</mat-icon>
			<span>Backup activities</span>
		</button>
		<button mat-menu-item (click)="onSyncedBackupImport()">
			<mat-icon>file_upload</mat-icon>
			<span>Restore activities</span>
		</button>
	</mat-menu>
</div>
